<!DOCTYPE html>
<html>
<head>
    <title>JSON Search</title>
</head>
<body>
    <pre id="json-output">Loading...</pre>

    <script>
        // 1. Get the name from the URL (?name=top hat)
        const params = new URLSearchParams(window.location.search);
        const itemName = params.get('name');

        if (!itemName) {
            document.getElementById('json-output').innerHTML = JSON.stringify({"error": "No name provided"}, null, 2);
        } else {
            fetch(`http://192.168.100.25:5000/search?name=${itemName}`)
                .then(response => response.json())
                .then(data => {
                    // 3. Display the JSON result on the screen
                    document.getElementById('json-output').innerHTML = JSON.stringify(data, null, 2);
                })
                .catch(err => {
                    document.getElementById('json-output').innerHTML = JSON.stringify({"error": "Could not connect to Pi"}, null, 2);
                });
        }
    </script>
</body>
</html>